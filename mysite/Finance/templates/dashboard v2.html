{% extends "base/base.html" %}
{% load static %}


{% block template %}

<style>

    
</style>



<script>
    // Fetch category names and populate the drop-down
    fetch('/finance/api/category_names')
        .then(response => response.json())
        .then(data => {
            const categorySelect = document.getElementById('category-name');
            
            // Populate dropdown options with category names
            data.forEach(category => {
                const option = document.createElement('option');
                option.value = category;  // Option value is the category name
                option.text = category;   // Option label is the category name
                categorySelect.add(option);
            });
        });

    document.getElementById('filter-form').addEventListener('change', () => {
        // Update display dynamically
        const category = document.getElementById('category-name').value;
        const startDate = document.getElementById('start-date').value;
        const endDate = document.getElementById('end-date').value;
        const excludeNocount = document.getElementById('exlude-nocount').checked ? 'checked' : '';
    
        const categoryDisplay = category ? category : 'All Categories';

        document.querySelector('.filter-display').innerHTML = `
            <p>Category: ${categoryDisplay}</p>
            <p>From: ${startDate}</p>
            <p>Until: ${endDate}</p>
            <p>Excluded Do Not Count: ${excludeNocount}</p>
        `;
    });

    // Get references to the button and form container
    const toggleButton = document.getElementById('toggle-button');
    const formContainer = document.getElementById('form-container');

    // Add click event listener to toggle the form visibility
    toggleButton.addEventListener('click', () => {
    formContainer.classList.toggle('active');
    });
</script>


<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

{% endblock %}